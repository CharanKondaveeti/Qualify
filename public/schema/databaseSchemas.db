CREATE TABLE exams (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  course TEXT NOT NULL,
  description TEXT,
  date DATE,
  start_time TIMESTAMP,
  end_time TIMESTAMP,
  duration INTEGER, -- in minutes

  status TEXT CHECK (status IN ('upcoming', 'active', 'completed')) DEFAULT 'upcoming',
  is_published BOOLEAN DEFAULT false,
  is_expired BOOLEAN DEFAULT false,

  show_results_immediately BOOLEAN DEFAULT true,
  shuffle_questions BOOLEAN DEFAULT false,
  shuffle_options BOOLEAN DEFAULT false,

  pass_percentage INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now()
  total_marks INTEGER 
);


4. Questions Table
Field	Type	Description
id	UUID (PK)	Unique ID for each question.
exam_id	UUID (FK)	Foreign key referencing exams.id.
question_text	Text	The text of the question.
options	JSONB	Array of options (4 options).
correct_answer	Integer	Index of the correct option (0-3).
marks	Integer	Marks for this question.
created_at	Timestamp	When the question was added.


CREATE TABLE exam_students (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  exam_id UUID REFERENCES exams(id) ON DELETE CASCADE,
  student_id UUID REFERENCES students(id) ON DELETE CASCADE,
  hallticket

  -- Exam Access & Status
  is_attempted BOOLEAN DEFAULT false,
  access_token TEXT,
  access_expires_at TIMESTAMP,
  started_at TIMESTAMP,
  ended_at TIMESTAMP,
  status TEXT CHECK (status IN ('not_started', 'in_progress', 'submitted', 'disqualified')) DEFAULT 'not_started',

  -- Monitoring & Behavior
  tab_switches INTEGER DEFAULT 0,
  disqualified BOOLEAN DEFAULT false,

  -- Result
  score INTEGER,
  passed BOOLEAN,
  retake_count INTEGER DEFAULT 0,

  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
